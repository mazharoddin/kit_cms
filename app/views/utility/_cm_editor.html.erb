<script type="text/javascript">
  $(document).ready(function() {
      var editor_a = parent.document.getElementById('<%= form_field %>');
      var options = { lineNumbers: true, theme: 'blackboard-cms', indentUnit: 2, lineWrapping: true, matchBrackets: true  , collapseRange: true, mode : '<%= mode %>'};
  var html_editor = parent.CodeMirror.fromTextArea(editor_a, options);
  html_editor.focus();
  <% if height || width %>
    <% width = width ?  "\"#{width}\"" : 'null' %>
    <% height = height ?  "\"#{height}\"" : 'null' %>
    <%= "html_editor.setSize(#{width}, #{height})".html_safe %>
  <% end %>

  });
</script>

<div class='editor_mode'>Mode: <%= (mode=='htmlmixed' ? 'html' : mode).upcase %>
</div>

<%= form.text_area field %>



